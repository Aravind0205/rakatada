"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./utils.js");function t(e,t){return"<".concat(e,'>; rel="alternate"; hreflang="').concat(t,'"')}exports.default=function(a){var o,n;let{config:l,localizedPathnames:r,request:c,resolvedLocale:i}=a;const s=c.nextUrl.clone();function u(t,a){return r&&"object"==typeof r?e.formatTemplatePathname(t,r[i],r[a]):t}s.host=null!==(o=e.getHost(c.headers))&&void 0!==o?o:s.host,s.protocol=null!==(n=c.headers.get("x-forwarded-proto"))&&void 0!==n?n:s.protocol,s.pathname=e.getNormalizedPathname(s.pathname,l.locales);const p=l.locales.flatMap((a=>{function o(e){return"/"===e?"/".concat(a):"/".concat(a).concat(e)}let n;if(l.domains){return(l.domains.filter((t=>e.isLocaleSupportedOnDomain(a,t)))||[]).map((e=>(n=new URL(s),n.port="",n.host=e.domain,n.pathname=u(n.pathname,a),a===e.defaultLocale&&"always"!==l.localePrefix||(n.pathname=o(n.pathname)),t(n.toString(),a))))}{let e;e=r&&"object"==typeof r?u(s.pathname,a):s.pathname,a===l.defaultLocale&&"always"!==l.localePrefix||(e=o(e)),n=new URL(e,s)}return t(n.toString(),a)}));if(!l.domains){const e=new URL(u(s.pathname,l.defaultLocale),s);p.push(t(e.toString(),"x-default"))}return p.join(", ")};
