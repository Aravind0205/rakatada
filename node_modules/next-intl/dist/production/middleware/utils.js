"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../shared/utils.js");function t(e){return e.split("/")[1]}function n(t,n){const o=e.templateToRegex(t).exec(n);if(!o)return;const r={};for(let e=1;e<o.length;e++){var a;const n=null===(a=t.match(/\[([^\]]+)\]/g))||void 0===a?void 0:a[e-1].replace(/[[\]]/g,"");n&&(r[n]=o[e])}return r}function o(e,t){if(!t)return e;let n=e=e.replaceAll("[[","[").replaceAll("]]","]");return Object.entries(t).forEach((e=>{let[t,o]=e;n=n.replace("[".concat(t,"]"),o)})),n}function r(e,t){return t.defaultLocale===e||!t.locales||t.locales.includes(e)}exports.formatPathname=o,exports.formatTemplatePathname=function(e,t,r,a){const c=n(t,e);let l="";return a&&(l="/".concat(a)),l+=o(r,c),l.endsWith("/")&&(l=l.slice(0,-1)),l},exports.getBasePath=function(e,t){return e.replace("/".concat(t),"")||"/"},exports.getBestMatchingDomain=function(e,t,n){let o;return e&&r(t,e)&&(o=e),o||(o=n.find((e=>e.defaultLocale===t))),o||(o=n.find((e=>null!=e.locales&&e.locales.includes(t)))),o||null!=(null==e?void 0:e.locales)||(o=e),o||(o=n.find((e=>!e.locales))),o},exports.getHost=function(e){var t,n;return null!==(t=null!==(n=e.get("x-forwarded-host"))&&void 0!==n?n:e.get("host"))&&void 0!==t?t:void 0},exports.getInternalTemplate=function(t,n){for(const[o,r]of Object.entries(t))if("string"==typeof r){const t=r;if(e.matchesPathname(t,n))return[void 0,o]}else for(const[t,a]of Object.entries(r))if(e.matchesPathname(a,n))return[t,o];return[void 0,void 0]},exports.getKnownLocaleFromPathname=function(e,n){const o=t(e);return n.includes(o)?o:void 0},exports.getLocaleFromPathname=t,exports.getNormalizedPathname=function(e,t){e.endsWith("/")||(e+="/");const n=e.match("^/(".concat(t.join("|"),")(.*)"));let o=n?n[2]:e;return o.endsWith("/")&&"/"!==o&&(o=o.slice(0,-1)),o},exports.getPathWithSearch=function(e,t){let n=e;return t&&(n+=t),n},exports.getRouteParams=n,exports.isLocaleSupportedOnDomain=r;
