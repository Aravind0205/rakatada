'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var React = require('react');
var core = require('use-intl/core');
var getRuntimeConfig = require('next-intl/config');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var getRuntimeConfig__default = /*#__PURE__*/_interopDefault(getRuntimeConfig);

// Make sure `now` is consistent across the request in case none was configured
const getDefaultNow = React.cache(() => new Date());
const receiveRuntimeConfig = React.cache(async (locale, getConfig) => {
  var _result;
  let result = getConfig === null || getConfig === void 0 ? void 0 : getConfig({
    locale
  });
  if (result instanceof Promise) {
    result = await result;
  }
  return {
    ...result,
    now: ((_result = result) === null || _result === void 0 ? void 0 : _result.now) || getDefaultNow()
  };
});
const getConfig = React.cache(async locale => {
  const runtimeConfig = await receiveRuntimeConfig(locale, getRuntimeConfig__default.default);
  const opts = {
    ...runtimeConfig,
    locale
  };
  return core.initializeConfig(opts);
});
var getConfig$1 = getConfig;

exports.default = getConfig$1;
